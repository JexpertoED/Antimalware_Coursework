#ifndef DATABASEMANAGER_H
#define DATABASEMANAGER_H
#pragma once
#include "record.h"
#include "DatabaseManager_global.h"
#include "filemanager.h"
#include "record.h"
class DatabaseManager
{
private:
    quint64 recordsNum;
    QFile* dbfile;
    QFile::OpenMode mode;
    FileWriter<Record>* writer;
    FileReader<Record>* reader;
    Record* buffer;
    bool init_sequence_read = false;
    bool num_records_read = false;
public:
    DatabaseManager();
    DatabaseManager(QFile* file, QIODevice::OpenMode mode, Record* buffer);
    ~DatabaseManager();
    void addRecord(Record& rec);
    void init();
    bool readRecord(Record& rec);
    void open(QFile* file, QFile::OpenMode mode);
    void close();
    int read_init_sequence(QString* outPtr);
    quint64 read_num_of_records();
};

#endif // DATABASEMANAGER_H
