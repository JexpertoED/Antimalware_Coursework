#ifndef FILEREADER_H
#define FILEREADER_H


#include "filemanager.h"
#include <QFile>
#include <QDataStream>

template<typename T>
class FileReader : public QObject, public Reader<T>
{
    QFile* file;
    QDataStream* inFile;
public:
    bool read(T* t) override;
    FileReader(QFile* file);
};

template <typename T>
bool FileReader<T>::read(T* t)
{
    if (inFile->atEnd())
        return false;
    *inFile >> *t;
    return true;
}

template <typename T>
FileReader<T>::FileReader(QFile* file) : QObject(file)
{
    this->file = file;
    if (!file->isOpen())
        file->open(QFile::ReadOnly);
    inFile = new QDataStream(file);
}

#endif // FILEREADER_H
